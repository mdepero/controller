<!DOCTYPE html>
<html>
<head>
  <title>Game Controler Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <script>
  
/* JavaScript for Game Controller
 *
 * All code by Matt DePero
 */

var xmlhttp;
if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari

	xmlhttp=new XMLHttpRequest();
}else{// code for IE6, IE5

	xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}

function setColor(){
	var color = document.getElementById('color').value;
	var url = "http://107.10.18.206/serverfile.php?set&color="+color+"&t=" + Math.random();
	xmlhttp.open("GET",url,true);
	xmlhttp.send();
}

function getColor(){
	var url = "http://107.10.18.206/serverfile.php?get&t=" + Math.random();
	xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById('tester').style.backgroundColor = "#"+xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET", url, true);
    xmlhttp.send();
}


function run(){
	document.getElementById("tester").style.backgroundColor = "#" + getColor();
}



window.setInterval(function () {run();}, 500);
  </script>


</head>

<body>

  <h1>Demo of AJAX as a mobile controller platform</h1>
  <p>
  	The test box below changes colors based on a single text file located on the server. Any request to the server to change that text file will change the background color on any device that has the page open.
  </p>
  #<input type="text" id="color" placeholder="color"><button type="button" onclick="setColor();">Set Color</button>
  <div id="tester" style="color:red;border:1px solid black;padding:5px;height:400px;">Test Box</div>

</body>

</html>